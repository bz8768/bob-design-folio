<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HYPER PARALLAX | Bob's Design Folio</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Space+Grotesk:wght@300;400;500;600;700&display=swap');

        :root {
            --depth: 2000px;
            --c-void: #000000;
            --c-star: #ffffff;
            --c-neon-blue: #00f3ff;
            --c-neon-purple: #bc13fe;
            --c-neon-pink: #ff0055;
            --c-toxic: #ccff00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--c-void);
            color: white;
            font-family: 'Space Grotesk', sans-serif;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        /* === UI OVERLAY === */
        #ui-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: exclusion;
        }

        .hud-line {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-container {
            position: absolute;
            left: 2rem;
            top: 50%;
            transform: translateY(-50%);
            height: 60vh;
            width: 2px;
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            width: 100%;
            background: var(--c-neon-blue);
            box-shadow: 0 0 20px var(--c-neon-blue);
        }

        .velocity-bar {
            position: absolute;
            right: 2rem;
            bottom: 2rem;
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            transform-origin: right;
        }

        .velocity-fill {
            height: 100%;
            width: 0%;
            background: var(--c-toxic);
            transition: width 0.1s linear;
        }

        /* === CORE PARALLAX CONTAINER === */
        .stage {
            position: relative;
            width: 100%;
            overflow: hidden;
            perspective: var(--depth);
            transform-style: preserve-3d;
        }

        .section {
            position: relative;
            height: 150vh;
            /* Taller for more scroll time */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            transform-style: preserve-3d;
        }

        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            will-change: transform;
        }

        /* Intense Content Typography */
        .content-block {
            position: relative;
            z-index: 100;
            text-align: center;
            mix-blend-mode: hard-light;
            pointer-events: none;
            /* Let clicks pass to interactive layers */
            transform-style: preserve-3d;
        }

        h2 {
            font-family: 'Syncopate', sans-serif;
            font-weight: 700;
            font-size: clamp(3rem, 10vw, 8rem);
            line-height: 0.8;
            text-transform: uppercase;
            letter-spacing: -0.05em;
            color: transparent;
            -webkit-text-stroke: 2px rgba(255, 255, 255, 0.8);
            position: relative;
            transition: all 0.5s ease;
        }

        h2::before {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            color: white;
            opacity: 0;
            clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
            transition: all 0.8s cubic-bezier(0.1, 0.9, 0.2, 1);
        }

        .section.active h2::before {
            opacity: 1;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
        }

        p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 2rem auto 0;
            line-height: 1.6;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s ease 0.3s;
            text-shadow: 0 2px 10px black;
        }

        .section.active p {
            opacity: 1;
            transform: translateY(0);
        }

        /* === UTILS === */
        .full-fit {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .blend-screen {
            mix-blend-mode: screen;
        }

        .blend-overlay {
            mix-blend-mode: overlay;
            opacity: 0.8;
        }

        .float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            50% {
                transform: translateY(-30px) rotate(2deg);
            }
        }
    </style>
</head>

<body>

    <!-- HUD LAYER -->
    <div id="ui-layer">
        <div class="progress-container">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="velocity-bar">
            <div class="velocity-fill" id="velocityFill"></div>
        </div>
        <div
            style="position:fixed; bottom: 2rem; left: 2rem; font-family: 'Syncopate'; font-size: 0.8rem; opacity: 0.5;">
            VELOCITY <span id="velDisplay">0</span> PX/S
        </div>
    </div>

    <div class="stage" id="stage">

        <!-- SECTION 1: THE PORTAL (HERO) -->
        <section class="section" id="hero" style="background: radial-gradient(circle at center, #1a0b2e 0%, #000 70%);">
            <!-- Warp Stars -->
            <div class="layer" data-speed="0.1" data-z="-500">
                <div
                    style="width: 100%; height: 100%; background: radial-gradient(white 1px, transparent 1px); background-size: 50px 50px; opacity: 0.5;">
                </div>
            </div>
            <div class="layer" data-speed="0.2" data-z="0" data-mouse="0.5">
                <div style="width: 100%; height: 100%; background: 
                    linear-gradient(transparent 95%, rgba(0, 243, 255, 0.3) 100%),
                    linear-gradient(90deg, transparent 95%, rgba(0, 243, 255, 0.3) 100%);
                    background-size: 100px 100px;
                    transform: perspective(500px) rotateX(60deg) scale(2);">
                </div>
            </div>

            <!-- Floating Monoliths -->
            <div class="layer" data-speed="0.5" data-z="200" data-mouse="1">
                <div
                    style="position: absolute; left: 10%; top: 20%; width: 100px; height: 300px; background: linear-gradient(45deg, var(--c-neon-purple), transparent); filter: blur(20px); opacity: 0.6;">
                </div>
                <div
                    style="position: absolute; right: 15%; top: 40%; width: 50px; height: 150px; background: linear-gradient(45deg, var(--c-neon-blue), transparent); filter: blur(10px);">
                </div>
            </div>

            <!-- Main Title -->
            <div class="content-block">
                <h2 data-text="HYPER SPACE">HYPER SPACE</h2>
                <p>INITIATING WARP SEQUENCE. SCROLL TO ENGAGE.</p>
                <div
                    style="margin-top: 2rem; width: 50px; height: 80px; border: 2px solid white; border-radius: 25px; margin: 2rem auto; position: relative;">
                    <div
                        style="width: 4px; height: 10px; background: white; position: absolute; left: 50%; transform: translateX(-50%); top: 10px; animation: float 1s infinite alternate;">
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: THE STRATOSPHERE (CLOUDS) -->
        <section class="section" id="clouds" style="background: linear-gradient(to bottom, #000, #1e3c72);">
            <!-- Sun Flare -->
            <div class="layer" data-speed="0.1" data-z="-1000">
                <div
                    style="position: absolute; top: -10%; right: 10%; width: 800px; height: 800px; background: radial-gradient(circle, #ffaa00 0%, transparent 70%); opacity: 0.8; mix-blend-mode: screen;">
                </div>
            </div>

            <!-- Massive Cloud Layers (Inline SVG Blobs) -->
            <div class="layer" data-speed="0.2" data-z="-200">
                <svg width="100%" height="100%" viewBox="0 0 1000 1000" preserveAspectRatio="none"
                    style="filter: blur(40px); opacity: 0.4; fill: #fff;">
                    <path d="M0,800 Q250,600 500,800 T1000,800 V1000 H0 Z" />
                </svg>
            </div>

            <div class="layer" data-speed="0.4" data-z="100" data-mouse="0.2">
                <svg width="100%" height="100%" viewBox="0 0 1000 1000" preserveAspectRatio="none"
                    style="filter: blur(20px); opacity: 0.6; fill: #d4e0ff;">
                    <path d="M-100,500 Q200,300 500,500 T1200,600 V1000 H-100 Z" />
                </svg>
            </div>

            <div class="layer" data-speed="0.8" data-z="400" data-mouse="0.6">
                <!-- Fast moving fog -->
                <div
                    style="width: 200%; height: 100%; background: url('data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'400\' height=\'400\'><filter id=\'noise\'><feTurbulence type=\'fractalNoise\' baseFrequency=\'0.01\' numOctaves=\'3\'/></filter><rect width=\'100%\' height=\'100%\' filter=\'url(%23noise)\' opacity=\'0.3\'/></svg>'); opacity: 0.4;">
                </div>
            </div>

            <div class="content-block">
                <h2 data-text="AERIAL">AERIAL</h2>
                <p>BREACHING ATMOSPHERIC LAYERS. VISIBILITY: VARIABLE.</p>
            </div>
        </section>

        <!-- SECTION 3: NEON PEAKS (MOUNTAINS) -->
        <section class="section" id="mountains"
            style="background: linear-gradient(180deg, #1e3c72 0%, #2a5298 50%, #000 100%);">
            <!-- God Rays -->
            <div class="layer" data-speed="0" style="mix-blend-mode: overlay;">
                <div
                    style="position: absolute; top: -50%; left: 50%; width: 100%; height: 200%; background: conic-gradient(from 180deg at 50% 0%, transparent 0deg, rgba(255,255,255,0.1) 10deg, transparent 20deg, rgba(255,255,255,0.1) 40deg, transparent 60deg); filter: blur(20px); animation: rotate 20s linear infinite;">
                </div>
            </div>

            <div class="layer" data-speed="0.1" data-z="-300">
                <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="full-fit">
                    <path d="M0 100 L20 40 L50 90 L80 30 L100 100 Z" fill="#0f172a" />
                </svg>
            </div>

            <div class="layer" data-speed="0.3" data-z="0" data-mouse="0.1">
                <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="full-fit">
                    <path d="M0 100 L30 50 L60 80 L100 100 Z" fill="#1e293b" />
                </svg>
            </div>

            <div class="layer" data-speed="0.6" data-z="300" data-mouse="0.3">
                <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="full-fit"
                    style="filter: drop-shadow(0 -10px 20px rgba(0,243,255,0.2));">
                    <path d="M-10 100 L40 60 L110 100 Z" fill="#334155" />
                    <!-- Neon Edge -->
                    <path d="M-10 100 L40 60 L110 100" fill="none" stroke="var(--c-neon-blue)" stroke-width="0.5" />
                </svg>
            </div>

            <div class="content-block">
                <h2 data-text="SUMMIT">SUMMIT</h2>
                <p>ELEVATION CRITICAL. PROCEED WITH CAUTION.</p>
            </div>
        </section>
        <!-- SECTION 4: DIGITAL FLORA (FOREST) -->
        <section class="section" id="forest"
            style="background: linear-gradient(180deg, #000 0%, #051c05 40%, #000 100%);">
            <!-- Laser Trees -->
            <div class="layer" data-speed="0.2" data-z="-400" style="opacity: 0.3;">
                <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <defs>
                        <linearGradient id="treeGrad" x1="0" y1="1" x2="0" y2="0">
                            <stop offset="0%" stop-color="var(--c-toxic)" />
                            <stop offset="100%" stop-color="transparent" />
                        </linearGradient>
                    </defs>
                    <g fill="url(#treeGrad)">
                        <polygon points="10,100 15,40 20,100" />
                        <polygon points="30,100 35,20 40,100" />
                        <polygon points="80,100 85,30 90,100" />
                    </g>
                </svg>
            </div>

            <div class="layer" data-speed="0.4" data-z="0" data-mouse="0.2">
                <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                    <g fill="url(#treeGrad)" opacity="0.6">
                        <polygon points="-5,100 5,50 15,100" />
                        <polygon points="90,100 95,60 105,100" />
                    </g>
                </svg>
            </div>

            <!-- Floating Spores -->
            <div class="layer" data-speed="0.6" data-z="300" data-mouse="0.4">
                <div
                    style="position: absolute; left: 20%; top: 40%; width: 10px; height: 10px; background: var(--c-toxic); border-radius: 50%; box-shadow: 0 0 20px var(--c-toxic); animation: float 4s infinite;">
                </div>
                <div
                    style="position: absolute; left: 70%; top: 60%; width: 6px; height: 6px; background: var(--c-toxic); border-radius: 50%; box-shadow: 0 0 15px var(--c-toxic); animation: float 6s infinite reverse;">
                </div>
                <div
                    style="position: absolute; left: 50%; top: 30%; width: 8px; height: 8px; background: var(--c-toxic); border-radius: 50%; box-shadow: 0 0 10px var(--c-toxic); animation: float 5s infinite;">
                </div>
            </div>

            <div class="content-block">
                <h2 data-text="BIOS">BIOS</h2>
                <p>ORGANIC DATA STRUCTURES DETECTED. SYNCHRONIZING.</p>
            </div>
        </section>

        <!-- SECTION 5: HYDRO SPHERE (OCEAN) -->
        <section class="section" id="ocean"
            style="background: linear-gradient(180deg, #001f3f 0%, #001a33 100%); overflow: hidden;">
            <!-- Surface Distortion Filter definition -->
            <svg style="position: absolute; width: 0; height: 0;">
                <filter id="waterDistort">
                    <feTurbulence type="turbulence" baseFrequency="0.01 0.05" numOctaves="2" result="turbulence" />
                    <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="20" xChannelSelector="R"
                        yChannelSelector="G" />
                </filter>
            </svg>

            <div class="layer" data-speed="0.2" data-z="-200">
                <div
                    style="width: 120%; height: 120%; left: -10%; background: repeating-linear-gradient(0deg, transparent, transparent 49px, rgba(0, 243, 255, 0.1) 50px); filter: url(#waterDistort); animation: float 10s infinite linear;">
                </div>
            </div>

            <!-- Neon Jellyfish (Procedural CSS) -->
            <div class="layer" data-speed="0.3" data-z="100" data-mouse="0.2">
                <div
                    style="position: absolute; right: 20%; top: 30%; width: 100px; height: 120px; border: 2px solid var(--c-neon-blue); border-radius: 50% 50% 0 0; box-shadow: 0 0 30px var(--c-neon-blue) inset; animation: float 8s infinite;">
                </div>
            </div>

            <!-- Bubbles -->
            <div class="layer" data-speed="0.8" data-z="400" data-mouse="0.1">
                <div
                    style="position: absolute; left: 10%; bottom: -100px; width: 20px; height: 20px; border: 2px solid white; border-radius: 50%; animation: float 15s infinite; opacity: 0.5;">
                </div>
                <div
                    style="position: absolute; left: 30%; bottom: -150px; width: 30px; height: 30px; border: 2px solid white; border-radius: 50%; animation: float 12s infinite; opacity: 0.3;">
                </div>
            </div>

            <div class="content-block">
                <h2 data-text="LIQUID">LIQUID</h2>
                <p>SUBMERGED IN DIGITAL CURRENTS. PRESSURE INCREASING.</p>
            </div>
        </section>

        <!-- SECTION 6: THE VOID (THE DEEP) -->
        <section class="section" id="deep" style="background: #000;">
            <!-- Pulsating Core -->
            <div class="layer" data-speed="0.1" data-z="-500">
                <div
                    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 500px; height: 500px; background: radial-gradient(circle, var(--c-neon-purple) 0%, transparent 60%); opacity: 0.3; animation: pulse 4s infinite;">
                </div>
            </div>

            <!-- Data Rain (Matrix style upward flow) -->
            <div class="layer" data-speed="0.3" data-z="0">
                <div
                    style="width: 100%; height: 100%; background: linear-gradient(0deg, transparent 0%, rgba(188, 19, 254, 0.2) 50%, transparent 100%); background-size: 100% 50px;">
                </div>
            </div>

            <div class="layer" data-speed="0.6" data-z="200" data-mouse="0.3">
                <div
                    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 200px; height: 200px; border: 1px solid rgba(255,255,255,0.2); border-radius: 50%; box-shadow: 0 0 50px var(--c-neon-purple);">
                </div>
            </div>

            <style>
                @keyframes pulse {

                    0%,
                    100% {
                        opacity: 0.3;
                        transform: translate(-50%, -50%) scale(1);
                    }

                    50% {
                        opacity: 0.6;
                        transform: translate(-50%, -50%) scale(1.2);
                    }
                }
            </style>

            <div class="content-block">
                <h2 data-text="ABYSS">ABYSS</h2>
                <p>MAXIMUM DEPTH REACHED. LIGHT IS SCARCE.</p>
            </div>
        </section>
        <!-- SECTION 7: QUANTUM REALM (ABSTRACT) -->
        <section class="section" id="abstract" style="background: linear-gradient(135deg, #2a0a3e 0%, #000 100%);">
            <!-- Tesseracts -->
            <div class="layer" data-speed="0.2" data-z="-300">
                <div
                    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 400px; height: 400px; border: 2px solid rgba(255,255,255,0.1); animation: rotate 30s linear infinite;">
                </div>
                <div
                    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%) rotate(45deg); width: 400px; height: 400px; border: 2px solid rgba(255,255,255,0.1); animation: rotate 30s linear infinite reverse;">
                </div>
            </div>

            <div class="layer" data-speed="0.5" data-z="0" data-mouse="0.5">
                <style>
                    .shard {
                        position: absolute;
                        background: rgba(255, 255, 255, 0.1);
                        backdrop-filter: blur(5px);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        transform-style: preserve-3d;
                        animation: float-3d 10s infinite ease-in-out;
                    }

                    @keyframes float-3d {

                        0%,
                        100% {
                            transform: translate3d(0, 0, 0) rotateX(0) rotateY(0);
                        }

                        50% {
                            transform: translate3d(50px, -50px, 100px) rotateX(180deg) rotateY(180deg);
                        }
                    }

                    @keyframes rotate {
                        from {
                            transform: translate(-50%, -50%) rotate(0deg);
                        }

                        to {
                            transform: translate(-50%, -50%) rotate(360deg);
                        }
                    }
                </style>
                <div class="shard" style="top: 20%; left: 20%; width: 100px; height: 100px;"></div>
                <div class="shard" style="top: 70%; right: 20%; width: 150px; height: 150px; animation-delay: -2s;">
                </div>
                <div class="shard" style="top: 40%; left: 60%; width: 80px; height: 80px; animation-delay: -5s;"></div>
            </div>

            <div class="content-block">
                <h2 data-text="QUANTUM">QUANTUM</h2>
                <p>REALITY DESTABILIZED. DIMENSIONAL FRACTURE IMMINENT.</p>
            </div>
        </section>

        <!-- SECTION 8: EVENT HORIZON (COSMOS) -->
        <section class="section" id="cosmos"
            style="background: radial-gradient(circle at center, #1a0b2e 0%, #000 70%);">
            <!-- Galaxy Disc -->
            <div class="layer" data-speed="0.1" data-z="-600">
                <div
                    style="position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%) rotateX(70deg); width: 1000px; height: 1000px; background: radial-gradient(circle, transparent 20%, rgba(124, 58, 237, 0.2) 40%, transparent 70%); border-radius: 50%; animation: rotate 60s linear infinite;">
                </div>
            </div>

            <!-- Planets -->
            <div class="layer" data-speed="0.3" data-z="0" data-mouse="0.2">
                <div
                    style="position: absolute; top: 30%; right: 20%; width: 100px; height: 100px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #ff5e00, #5c0000); box-shadow: 0 0 50px #ff5e0033;">
                </div>
            </div>

            <div class="layer" data-speed="0.5" data-z="300" data-mouse="0.6">
                <div
                    style="position: absolute; bottom: 20%; left: 20%; width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #00f3ff, #0044ff); box-shadow: 0 0 100px #0044ff66; overflow: hidden;">
                    <!-- Rings -->
                    <div
                        style="position: absolute; top: 50%; left: 50%; width: 300px; height: 20px; background: rgba(255,255,255,0.2); transform: translate(-50%, -50%) rotate(20deg);">
                    </div>
                </div>
            </div>

            <div class="content-block">
                <h2 data-text="EVENT HORIZON">EVENT HORIZON</h2>
                <p>SINGULARITY APPROACHING. TIME DIALATION IN EFFECT.</p>
            </div>
        </section>

        <!-- SECTION 9: TERMINAL (FINALE) -->
        <section class="section" id="finale" style="background: #000;">
            <!-- Exit Portal -->
            <div class="layer" data-speed="0" style="display: flex; align-items: center; justify-content: center;">
                <div
                    style="width: 2px; height: 50vh; background: linear-gradient(to top, transparent, var(--c-neon-blue), transparent); animation: pulse 2s infinite;">
                </div>
            </div>

            <div class="content-block" style="z-index: 1000;">
                <h2 data-text="TERMINUS">TERMINUS</h2>
                <p>JOURNEY LOG COMPLETE.</p>
                <a href="../../index.html"
                    style="display: inline-block; margin-top: 3rem; padding: 1rem 3rem; background: transparent; border: 1px solid var(--c-neon-blue); color: var(--c-neon-blue); text-decoration: none; font-family: 'Syncopate'; letter-spacing: 2px; transition: all 0.3s ease; text-transform: uppercase;">
                    Return to Base
                </a>
            </div>
        </section>

    </div>

    <script>
        // === HYPER ENGINE ===
        const state = {
            scrollY: 0,
            lastScrollY: 0,
            velocity: 0,
            targetVelocity: 0,
            mouseX: 0,
            mouseY: 0,
            msgX: 0, // smoothed mouse
            msgY: 0
        };

        const dom = {
            stage: document.getElementById('stage'),
            sections: [],
            layers: document.querySelectorAll('.layer'),
            progress: document.getElementById('progressFill'),
            velocity: document.getElementById('velocityFill'),
            velText: document.getElementById('velDisplay')
        };

        // Initialize
        function init() {
            document.addEventListener('scroll', onScroll, { passive: true });
            document.addEventListener('mousemove', onMouseMove);
            requestAnimationFrame(tick);
            updateSections();
        }

        function updateSections() {
            dom.sections = document.querySelectorAll('.section');
            dom.layers = document.querySelectorAll('.layer');
        }

        function onScroll() {
            state.scrollY = window.scrollY;
        }

        function onMouseMove(e) {
            // Normalized -1 to 1
            state.mouseX = (e.clientX / window.innerWidth) * 2 - 1;
            state.mouseY = (e.clientY / window.innerHeight) * 2 - 1;
        }

        function tick() {
            // Velocity Physics
            const delta = state.scrollY - state.lastScrollY;
            state.targetVelocity = delta * 2; // amplify
            state.velocity += (state.targetVelocity - state.velocity) * 0.1; // Smooth ease
            state.lastScrollY = state.scrollY;

            // Mouse Smoothing
            state.msgX += (state.mouseX - state.msgX) * 0.05;
            state.msgY += (state.mouseY - state.msgY) * 0.05;

            // HUD update
            const docHeight = document.body.scrollHeight - window.innerHeight;
            const progress = state.scrollY / docHeight;
            dom.progress.style.height = `${progress * 100}%`;

            const velPercent = Math.min(Math.abs(state.velocity) / 50 * 100, 100);
            dom.velocity.style.width = `${velPercent}%`;
            dom.velText.innerText = Math.round(Math.abs(state.velocity));

            // GLOBAL WARP EFFECT (Body)
            // Stretch entire stage based on velocity? Maybe too nauseating. 
            // Let's just pass variables to CSS.
            document.documentElement.style.setProperty('--scroll-vel', state.velocity);
            document.documentElement.style.setProperty('--mouse-x', state.msgX);
            document.documentElement.style.setProperty('--mouse-y', state.msgY);

            // Per-Layer Parallax Logic
            dom.layers.forEach(layer => {
                const speed = parseFloat(layer.dataset.speed || 0);
                const depth = parseFloat(layer.dataset.z || 0); // Z-transform
                const mouseSens = parseFloat(layer.dataset.mouse || 0);

                // Parallax Calculation
                // Elements move based on scroll position relative to their section
                const section = layer.closest('.section');
                if (!section) return;

                const rect = section.getBoundingClientRect();
                const centerOffset = (window.innerHeight / 2) - (rect.top + rect.height / 2);

                // Only animate if somewhat visible (optimization)
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    const yMove = centerOffset * speed * -1;
                    const zMove = depth;

                    // Mouse Tilt
                    const rotX = state.msgY * mouseSens * -10;
                    const rotY = state.msgX * mouseSens * 10;

                    // Velocity Skew
                    const skewY = state.velocity * speed * 0.5;

                    layer.style.transform = `
                        translate3d(0, ${yMove}px, ${zMove}px)
                        rotateX(${rotX}deg)
                        rotateY(${rotY}deg)
                        skewY(${skewY}deg)
                    `;
                }

                // Activate Section
                if (rect.top < window.innerHeight * 0.5 && rect.bottom > window.innerHeight * 0.5) {
                    if (!section.classList.contains('active')) section.classList.add('active');
                } else {
                    if (section.classList.contains('active')) section.classList.remove('active');
                }
            });

            requestAnimationFrame(tick);
        }

        init();

        // Expose function for later injections
        window.refreshParallax = updateSections;
    </script>
</body>

</html>